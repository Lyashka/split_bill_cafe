import{_ as k,a as E}from"./BackBtn-CrowZyck.js";import{r as u,o as i,c as y,w as c,a as r,l as s,f as h,g as N,F as V,h as $,t as x,p as I,k as w,m as D,n as F,e as T,u as U}from"./index-CzaZS6Y-.js";import{a as j,u as z}from"./products--eU8dMOe.js";const f=n=>(I("data-v-0dce738c"),n=n(),w(),n),L=f(()=>s("tr",null,[s("th",{class:"text-center"},"Кто"),s("th",{class:"text-center"},"Кому"),s("th",{class:"text-center"},"Сколько")],-1)),M={key:0},q=f(()=>s("th",null,null,-1)),G=f(()=>s("th",{class:"text-message"}," Никто ничего не должен ",-1)),H=f(()=>s("th",null,null,-1)),J=[q,G,H],K={__name:"TableResults",props:{arrDebtors:Array},setup(n){return(v,g)=>{const m=u("v-table"),b=u("v-list-item");return i(),y(b,null,{default:c(()=>[r(m,{class:"table-container"},{default:c(()=>[s("thead",null,[L,n.arrDebtors.length==0?(i(),h("tr",M,J)):N("",!0)]),s("tbody",null,[(i(!0),h(V,null,$(n.arrDebtors,_=>(i(),h("tr",{key:_.id},[s("td",null,x(_.name),1),s("td",null,x(_.debt.name),1),s("td",null,x(Math.round(_.debt.price*10)/10),1)]))),128))])]),_:1})]),_:1})}}},O=k(K,[["__scopeId","data-v-0dce738c"]]),Q=n=>(I("data-v-228236f3"),n=n(),w(),n),W=Q(()=>s("label",null,"Результаты",-1)),X={__name:"PageResults",setup(n){const v=j(),{products:g,clearProducts:m}=v,b=z(),{users:_,clearUsers:P}=b;let S=D([]);const d=D([]);function R(){g.forEach(t=>{t.usersAte.forEach(p=>{p.name!=t.userPayer&&d.push({id:d[d.length-1]==null?1:d[d.length-1].id+1,name:p.name,debt:{name:t.userPayer,price:t.price/t.usersAte.length}})})}),A()}function A(){const t=d.reduce((e,l)=>{const o=e.find(a=>a.name===l.name&&a.debt.name===l.debt.name);return o?o.debt.price+=l.debt.price:e.push(l),e},[]);S=t.map((e,l)=>{if(e.debt.price>0){const o=t.findIndex(a=>a.name===e.debt.name&&a.debt.name===e.name&&a.debt.price>0);o!==-1&&(t[o].debt.price>=e.debt.price?(t[o].debt.price-=e.debt.price,e.debt.price=0):(e.debt.price-=t[o].debt.price,t[o].debt.price=0))}return e})}R();const B=F();function C(){localStorage.clear(),m(),P(),B.push("/")}return(t,p)=>{const e=u("v-col"),l=u("v-btn"),o=u("v-row"),a=u("v-card");return i(),y(a,{class:"mx-auto text-center mt-5 card-container","max-width":"600px","min-height":"100px"},{default:c(()=>[r(o,{"no-gutters":"",align:"center",justify:"center"},{default:c(()=>[r(e,{cols:"1"},{default:c(()=>[r(E,{url:"/products"})]),_:1}),r(e,{cols:"2"}),r(e,null,{default:c(()=>[W]),_:1}),r(e,null,{default:c(()=>[r(l,{block:"",variant:"outlined",size:"large",onClick:C},{default:c(()=>[T(" Начать занаво ")]),_:1})]),_:1})]),_:1}),r(O,{arrDebtors:U(S)},null,8,["arrDebtors"])]),_:1})}}},te=k(X,[["__scopeId","data-v-228236f3"]]);export{te as default};
